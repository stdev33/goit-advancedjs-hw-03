{"version":3,"file":"commonHelpers.js","sources":["../src/utils.js","../src/cat-api.js","../src/index.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nfunction displaySuccess(title, message) {\n  iziToast.success({\n    title,\n    message,\n  });\n}\n\nfunction displayError(title, message) {\n  iziToast.error({\n    title,\n    message,\n  });\n}\n\nfunction displayServerError(error) {\n  if (error.response) {\n    displayError(\n      '❌',\n      error.response.statusText ||\n        `Server response status ${error.response.status}`\n    );\n  } else if (error.request) {\n    displayError('❌', `Server not responds`);\n  } else {\n    displayError('❌', `Error: ${error.message}`);\n  }\n}\n\nclass HideableElement {\n  constructor(element, visibleClass, hiddenClass = 'hidden') {\n    this.elementInstance = element;\n    this.visibleClass = visibleClass;\n    this.hiddenClass = hiddenClass;\n  }\n\n  show() {\n    this.elementInstance.classList.replace(this.hiddenClass, this.visibleClass);\n  }\n\n  hide() {\n    this.elementInstance.classList.replace(this.visibleClass, this.hiddenClass);\n  }\n\n  get element() {\n    return this.elementInstance;\n  }\n}\n\nexport { displaySuccess, displayError, displayServerError, HideableElement };\n","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://api.thecatapi.com/v1';\naxios.defaults.timeout = 3000;\naxios.defaults.headers.common['x-api-key'] =\n  'live_SrH6JCALfDuuE8eLhZOtFhcASqmIRYZDZjDF0gdHR2v3B9OQ013XVvtStIwbF62A';\n\nconst axiosInstance = axios.create();\n\nfunction fetchBreeds() {\n  return axiosInstance.get('/breeds');\n}\n\nfunction fetchCatByBreed(breedId) {\n  return axiosInstance.get(`/images/search?breed_ids=${breedId}&limit=1`);\n}\n\nexport { fetchBreeds, fetchCatByBreed };\n","import { displayServerError, HideableElement } from './utils.js';\nimport { fetchBreeds, fetchCatByBreed } from './cat-api.js';\nimport SlimSelect from 'slim-select';\nimport 'slim-select/styles';\n\nconst refs = {\n  breedSelect: document.querySelector('.breed-select'),\n  catInfo: new HideableElement(document.querySelector('.cat-info'), 'cat-info'),\n  loader: new HideableElement(document.querySelector('.loader'), 'loader'),\n};\n\nconst breedSelect = new SlimSelect({\n  select: refs.breedSelect,\n  events: {\n    afterChange: onBreedSelectChange,\n  },\n});\n\nbreedSelect.disable();\nrefs.catInfo.hide();\n\nfetchBreeds()\n  .then(response => {\n    const options = response.data.map(breed => {\n      return {\n        text: breed.name,\n        value: breed.id,\n      };\n    });\n\n    breedSelect.setData(options);\n    breedSelect.enable();\n    refs.catInfo.show();\n  })\n  .catch(function (error) {\n    displayServerError(error);\n  })\n  .finally(() => {\n    refs.loader.hide();\n  });\n\nfunction onBreedSelectChange(options) {\n  refs.loader.show();\n\n  const breedId = options[0].value;\n  fetchCatByBreed(breedId)\n    .then(response => {\n      const cat = response.data[0];\n      refs.catInfo.element.innerHTML = createCatInfoMarkup(cat);\n    })\n    .catch(function (error) {\n      displayServerError(error);\n    })\n    .finally(() => {\n      refs.loader.hide();\n    });\n}\n\nfunction createCatInfoMarkup(cat) {\n  const {\n    url,\n    breeds: [info],\n  } = cat;\n\n  return `<img src=\"${url}\" alt=\"${info.name}\" class=\"cat-image\">\n    <div class=\"cat-info-text\">\n    <h2>${info.name}</h2>\n    <p>${info.description}</p>\n    <p><span class=\"text-bold\">Temperament:</span> ${info.temperament}</p>\n    </div>`;\n}\n"],"names":["displayError","title","message","iziToast","displayServerError","error","HideableElement","element","visibleClass","hiddenClass","axios","axiosInstance","fetchBreeds","fetchCatByBreed","breedId","refs","breedSelect","SlimSelect","onBreedSelectChange","response","options","breed","cat","createCatInfoMarkup","url","info"],"mappings":"owBAUA,SAASA,EAAaC,EAAOC,EAAS,CACpCC,EAAS,MAAM,CACb,MAAAF,EACA,QAAAC,CACJ,CAAG,CACH,CAEA,SAASE,EAAmBC,EAAO,CAC7BA,EAAM,SACRL,EACE,IACAK,EAAM,SAAS,YACb,0BAA0BA,EAAM,SAAS,QACjD,EACaA,EAAM,QACfL,EAAa,IAAK,qBAAqB,EAEvCA,EAAa,IAAK,UAAUK,EAAM,SAAS,CAE/C,CAEA,MAAMC,CAAgB,CACpB,YAAYC,EAASC,EAAcC,EAAc,SAAU,CACzD,KAAK,gBAAkBF,EACvB,KAAK,aAAeC,EACpB,KAAK,YAAcC,CACpB,CAED,MAAO,CACL,KAAK,gBAAgB,UAAU,QAAQ,KAAK,YAAa,KAAK,YAAY,CAC3E,CAED,MAAO,CACL,KAAK,gBAAgB,UAAU,QAAQ,KAAK,aAAc,KAAK,WAAW,CAC3E,CAED,IAAI,SAAU,CACZ,OAAO,KAAK,eACb,CACH,CC/CAC,EAAM,SAAS,QAAU,+BACzBA,EAAM,SAAS,QAAU,IACzBA,EAAM,SAAS,QAAQ,OAAO,aAC5B,wEAEF,MAAMC,EAAgBD,EAAM,SAE5B,SAASE,GAAc,CACrB,OAAOD,EAAc,IAAI,SAAS,CACpC,CAEA,SAASE,EAAgBC,EAAS,CAChC,OAAOH,EAAc,IAAI,4BAA4BG,WAAiB,CACxE,CCVA,MAAMC,EAAO,CACX,YAAa,SAAS,cAAc,eAAe,EACnD,QAAS,IAAIT,EAAgB,SAAS,cAAc,WAAW,EAAG,UAAU,EAC5E,OAAQ,IAAIA,EAAgB,SAAS,cAAc,SAAS,EAAG,QAAQ,CACzE,EAEMU,EAAc,IAAIC,EAAW,CACjC,OAAQF,EAAK,YACb,OAAQ,CACN,YAAaG,CACd,CACH,CAAC,EAEDF,EAAY,QAAO,EACnBD,EAAK,QAAQ,OAEbH,EAAa,EACV,KAAKO,GAAY,CAChB,MAAMC,EAAUD,EAAS,KAAK,IAAIE,IACzB,CACL,KAAMA,EAAM,KACZ,MAAOA,EAAM,EACrB,EACK,EAEDL,EAAY,QAAQI,CAAO,EAC3BJ,EAAY,OAAM,EAClBD,EAAK,QAAQ,MACjB,CAAG,EACA,MAAM,SAAUV,EAAO,CACtBD,EAAmBC,CAAK,CAC5B,CAAG,EACA,QAAQ,IAAM,CACbU,EAAK,OAAO,MAChB,CAAG,EAEH,SAASG,EAAoBE,EAAS,CACpCL,EAAK,OAAO,OAEZ,MAAMD,EAAUM,EAAQ,GAAG,MAC3BP,EAAgBC,CAAO,EACpB,KAAKK,GAAY,CAChB,MAAMG,EAAMH,EAAS,KAAK,GAC1BJ,EAAK,QAAQ,QAAQ,UAAYQ,EAAoBD,CAAG,CAC9D,CAAK,EACA,MAAM,SAAUjB,EAAO,CACtBD,EAAmBC,CAAK,CAC9B,CAAK,EACA,QAAQ,IAAM,CACbU,EAAK,OAAO,MAClB,CAAK,CACL,CAEA,SAASQ,EAAoBD,EAAK,CAChC,KAAM,CACJ,IAAAE,EACA,OAAQ,CAACC,CAAI,CACd,EAAGH,EAEJ,MAAO,aAAaE,WAAaC,EAAK;AAAA;AAAA,UAE9BA,EAAK;AAAA,SACNA,EAAK;AAAA,qDACuCA,EAAK;AAAA,WAE1D"}