{"version":3,"file":"commonHelpers.js","sources":["../src/utils.js","../src/cat-api.js","../src/index.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nfunction displaySuccess(title, message) {\n  iziToast.success({\n    title,\n    message,\n  });\n}\n\nfunction displayError(title, message) {\n  iziToast.error({\n    title,\n    message,\n  });\n}\n\nfunction displayServerError(error) {\n  if (error.response) {\n    displayError(\n      '❌',\n      error.response.statusText ||\n        `Server response status ${error.response.status}`\n    );\n  } else if (error.request) {\n    displayError('❌', `Server not responds`);\n  } else {\n    displayError('❌', `Error: ${error.message}`);\n  }\n}\n\nclass HideableElement {\n  constructor(element, visibleClass, hiddenClass = 'hidden') {\n    this.elementInstance = element;\n    this.visibleClass = visibleClass;\n    this.hiddenClass = hiddenClass;\n  }\n\n  show() {\n    this.elementInstance.classList.replace(this.hiddenClass, this.visibleClass);\n  }\n\n  hide() {\n    this.elementInstance.classList.replace(this.visibleClass, this.hiddenClass);\n  }\n\n  get element() {\n    return this.elementInstance;\n  }\n}\n\nexport { displaySuccess, displayError, displayServerError, HideableElement };\n","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://api.thecatapi.com/v1';\naxios.defaults.timeout = 3000;\naxios.defaults.headers.common['x-api-key'] =\n  'live_SrH6JCALfDuuE8eLhZOtFhcASqmIRYZDZjDF0gdHR2v3B9OQ013XVvtStIwbF62A';\n\nconst axiosInstance = axios.create();\n\nfunction fetchBreeds() {\n  return axiosInstance.get('/breeds');\n}\n\nfunction fetchCatByBreed(breedId) {\n  return axiosInstance.get(`/images/search?breed_ids=${breedId}&limit=1`);\n}\n\nexport { fetchBreeds, fetchCatByBreed };\n","import { displayError, HideableElement } from './utils.js';\nimport { fetchBreeds, fetchCatByBreed } from './cat-api.js';\nimport SlimSelect from 'slim-select';\nimport 'slim-select/styles';\n\nconst errorTitle = '❌';\nconst errorMessage = 'Oops! Something went wrong! Try reloading the page!';\nlet breedSelectDataSet = false;\n\nconst refs = {\n  breedSelect: new HideableElement(\n    document.querySelector('.breed-select'),\n    'breed-select'\n  ),\n  catInfo: new HideableElement(document.querySelector('.cat-info'), 'cat-info'),\n  loader: new HideableElement(document.querySelector('.loader'), 'loader'),\n};\n\nrefs.breedSelect.hide();\nrefs.catInfo.hide();\n\nfetchBreeds()\n  .then(response => {\n    const options = response.data.map(breed => {\n      return {\n        text: breed.name,\n        value: breed.id,\n      };\n    });\n\n    const breedSelect = new SlimSelect({\n      select: refs.breedSelect.element,\n      events: {\n        afterChange: onBreedSelectChange,\n      },\n    });\n\n    breedSelect.setData(options);\n    refs.breedSelect.show();\n  })\n  .catch(function (error) {\n    displayError(errorTitle, errorMessage);\n  })\n  .finally(() => {\n    refs.loader.hide();\n  });\n\nfunction onBreedSelectChange(options) {\n  if (!breedSelectDataSet) {\n    breedSelectDataSet = true;\n    return;\n  }\n\n  refs.loader.show();\n\n  const breedId = options[0].value;\n\n  fetchCatByBreed(breedId)\n    .then(response => {\n      const cat = response.data[0];\n      refs.catInfo.element.innerHTML = createCatInfoMarkup(cat);\n      refs.catInfo.show();\n    })\n    .catch(function (error) {\n      refs.catInfo.hide();\n      displayError(errorTitle, errorMessage);\n    })\n    .finally(() => {\n      refs.loader.hide();\n    });\n}\n\nfunction createCatInfoMarkup(cat) {\n  const {\n    url,\n    breeds: [info],\n  } = cat;\n\n  return `<img src=\"${url}\" alt=\"${info.name}\" class=\"cat-image\">\n    <div class=\"cat-info-text\">\n    <h2>${info.name}</h2>\n    <p>${info.description}</p>\n    <p><span class=\"text-bold\">Temperament:</span> ${info.temperament}</p>\n    </div>`;\n}\n"],"names":["displayError","title","message","iziToast","HideableElement","element","visibleClass","hiddenClass","axios","axiosInstance","fetchBreeds","fetchCatByBreed","breedId","errorTitle","errorMessage","breedSelectDataSet","refs","response","options","breed","SlimSelect","onBreedSelectChange","error","cat","createCatInfoMarkup","url","info"],"mappings":"owBAUA,SAASA,EAAaC,EAAOC,EAAS,CACpCC,EAAS,MAAM,CACb,MAAAF,EACA,QAAAC,CACJ,CAAG,CACH,CAgBA,MAAME,CAAgB,CACpB,YAAYC,EAASC,EAAcC,EAAc,SAAU,CACzD,KAAK,gBAAkBF,EACvB,KAAK,aAAeC,EACpB,KAAK,YAAcC,CACpB,CAED,MAAO,CACL,KAAK,gBAAgB,UAAU,QAAQ,KAAK,YAAa,KAAK,YAAY,CAC3E,CAED,MAAO,CACL,KAAK,gBAAgB,UAAU,QAAQ,KAAK,aAAc,KAAK,WAAW,CAC3E,CAED,IAAI,SAAU,CACZ,OAAO,KAAK,eACb,CACH,CC/CAC,EAAM,SAAS,QAAU,+BACzBA,EAAM,SAAS,QAAU,IACzBA,EAAM,SAAS,QAAQ,OAAO,aAC5B,wEAEF,MAAMC,EAAgBD,EAAM,SAE5B,SAASE,GAAc,CACrB,OAAOD,EAAc,IAAI,SAAS,CACpC,CAEA,SAASE,EAAgBC,EAAS,CAChC,OAAOH,EAAc,IAAI,4BAA4BG,WAAiB,CACxE,CCVA,MAAMC,EAAa,IACbC,EAAe,sDACrB,IAAIC,EAAqB,GAEzB,MAAMC,EAAO,CACX,YAAa,IAAIZ,EACf,SAAS,cAAc,eAAe,EACtC,cACD,EACD,QAAS,IAAIA,EAAgB,SAAS,cAAc,WAAW,EAAG,UAAU,EAC5E,OAAQ,IAAIA,EAAgB,SAAS,cAAc,SAAS,EAAG,QAAQ,CACzE,EAEAY,EAAK,YAAY,OACjBA,EAAK,QAAQ,OAEbN,EAAa,EACV,KAAKO,GAAY,CAChB,MAAMC,EAAUD,EAAS,KAAK,IAAIE,IACzB,CACL,KAAMA,EAAM,KACZ,MAAOA,EAAM,EACrB,EACK,EAEmB,IAAIC,EAAW,CACjC,OAAQJ,EAAK,YAAY,QACzB,OAAQ,CACN,YAAaK,CACd,CACP,CAAK,EAEW,QAAQH,CAAO,EAC3BF,EAAK,YAAY,MACrB,CAAG,EACA,MAAM,SAAUM,EAAO,CACtBtB,EAAaa,EAAYC,CAAY,CACzC,CAAG,EACA,QAAQ,IAAM,CACbE,EAAK,OAAO,MAChB,CAAG,EAEH,SAASK,EAAoBH,EAAS,CACpC,GAAI,CAACH,EAAoB,CACvBA,EAAqB,GACrB,MACD,CAEDC,EAAK,OAAO,OAEZ,MAAMJ,EAAUM,EAAQ,GAAG,MAE3BP,EAAgBC,CAAO,EACpB,KAAKK,GAAY,CAChB,MAAMM,EAAMN,EAAS,KAAK,GAC1BD,EAAK,QAAQ,QAAQ,UAAYQ,EAAoBD,CAAG,EACxDP,EAAK,QAAQ,MACnB,CAAK,EACA,MAAM,SAAUM,EAAO,CACtBN,EAAK,QAAQ,OACbhB,EAAaa,EAAYC,CAAY,CAC3C,CAAK,EACA,QAAQ,IAAM,CACbE,EAAK,OAAO,MAClB,CAAK,CACL,CAEA,SAASQ,EAAoBD,EAAK,CAChC,KAAM,CACJ,IAAAE,EACA,OAAQ,CAACC,CAAI,CACd,EAAGH,EAEJ,MAAO,aAAaE,WAAaC,EAAK;AAAA;AAAA,UAE9BA,EAAK;AAAA,SACNA,EAAK;AAAA,qDACuCA,EAAK;AAAA,WAE1D"}